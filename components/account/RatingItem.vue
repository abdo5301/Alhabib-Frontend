<template>
  <div class="w-full flex flex-col gap-[44px] lg:gap-6 justify-center items-center">
    <h4 v-if="rating_title" class="text-center text-base lg:text-lg font-bold text-gray-900 leading-5 lg:leading-5">{{ rating_title }}</h4>
    <div class="w-full flex justify-center items-center flex-row gap-5 lg:gap-[35px]">
      <span class="flex justify-center items-center gap-[23px] lg:gap-[35px]" v-for="star in total_rating"
        @click="read_only == false ? setRating(star) : () => false">
        <svg xmlns="http://www.w3.org/2000/svg"
          :class="['fill-black w-[30px] h-[30px] lg:w-[50px] lg:h-[50px]', read_only == false ? 'cursor-pointer' : '', star_style ? star_style : '']"
          viewBox="0 0 69 68" fill="none">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M30.8695 2.43573L23.2947 19.7351C23.079 20.2276 22.6319 20.5673 22.1181 20.6296L4.03495 22.8131C2.48224 23 1.17792 24.117 0.695357 25.6687C0.212798 27.2218 0.641423 28.9262 1.79105 30.0298L15.192 42.9057C15.5738 43.2721 15.7441 43.821 15.6419 44.352L12.0412 63.0013C11.7318 64.6019 12.3449 66.244 13.6081 67.2037C14.8712 68.162 16.5545 68.2644 17.9142 67.4618L33.7733 58.1194C34.2247 57.8539 34.7753 57.8539 35.2267 58.1194L51.0858 67.4618C52.4455 68.2644 54.1288 68.162 55.3919 67.2037C56.6551 66.244 57.2682 64.6019 56.9588 63.0013L53.3581 44.352C53.2559 43.821 53.4262 43.2721 53.808 42.9057L67.2089 30.0298C68.3586 28.9262 68.7872 27.2218 68.3046 25.6687C67.8221 24.117 66.5178 23 64.965 22.8131L46.8819 20.6296C46.3681 20.5673 45.921 20.2276 45.7053 19.7366L38.1305 2.43573C37.4805 0.950854 36.0612 0 34.5 0C32.9388 0 31.5195 0.950854 30.8695 2.43573ZM33.5633 3.72332C33.7307 3.3406 34.0969 3.09436 34.5 3.09436C34.9031 3.09436 35.2693 3.3406 35.4367 3.72332C35.4367 3.72332 41.0216 16.4776 43.0129 21.0242C43.6587 22.5016 44.9985 23.5177 46.5427 23.7047L64.6258 25.8882C65.0261 25.9372 65.3625 26.2249 65.4874 26.6255C65.6123 27.026 65.5015 27.4665 65.2049 27.7514C65.2049 27.7514 55.3252 37.2436 51.8026 40.6272C50.6586 41.7264 50.1477 43.3715 50.4542 44.9647L54.055 63.6139C54.1359 64.0278 53.9769 64.4506 53.6519 64.6983C53.3255 64.946 52.8912 64.9727 52.5392 64.765C52.5392 64.765 40.8499 57.8791 36.6814 55.4226C35.3274 54.6245 33.6726 54.6245 32.3185 55.4226L16.4608 64.765C16.1088 64.9727 15.6745 64.946 15.3481 64.6983C15.0231 64.4506 14.8641 64.0278 14.945 63.6139C14.945 63.6139 17.5991 49.8658 18.5458 44.9647C18.8523 43.3715 18.3414 41.7264 17.1974 40.6272L3.79509 27.7514C3.49846 27.4665 3.38775 27.026 3.51265 26.6255C3.63755 26.2249 3.97391 25.9372 4.37415 25.8882C4.37415 25.8882 17.7055 24.2787 22.4573 23.7047C24.0015 23.5177 25.3413 22.5016 25.9871 21.0242L33.5633 3.72332Z" />
          <path v-if="star <= rating"
            d="M13.4704 23.733C19.3431 23.2813 24.4978 19.6521 26.9031 14.2755L31.0587 4.98649C31.347 4.34199 31.8117 3.79218 32.3992 3.40053C34.2979 2.13472 36.8777 2.84779 37.8568 4.90904L42.3963 14.4659C44.3241 18.5245 48.2256 21.2869 52.694 21.7573L62.5605 22.7958C63.7688 22.923 64.8288 23.6576 65.3722 24.7443C66.0479 26.0957 65.7969 27.7265 64.7462 28.8123L57.6318 36.1638C53.7635 40.1611 51.9603 45.7221 52.747 51.2287L54.4812 63.3683C54.4937 63.456 54.5 63.5445 54.5 63.6331C54.5 64.9844 53.1122 65.8907 51.8749 65.3475L38.694 59.5608C35.7116 58.2514 32.3087 58.2959 29.3615 59.6828L17.2801 65.3682C17.0939 65.4558 16.8987 65.5225 16.6978 65.5672C14.7258 66.0054 12.9569 64.2661 13.3617 62.287L15.9334 49.7144C16.6078 46.4176 15.7512 42.9928 13.6043 40.4017L3.33909 28.0127C2.82191 27.3885 2.68739 26.5315 2.98843 25.7789C3.30162 24.9959 4.03258 24.459 4.87338 24.3944L13.4704 23.733Z" />
        </svg>
      </span>
    </div>
  </div>
</template>

<script setup>
const emits = defineEmits(['updateRating'])
const props = defineProps({
  rating: {
    type: Number
  },
  total_rating: {
    type: Number,
    default: 5
  },
  rating_title: {
    type: String,
  },
  star_style: {
    type: String,
  },
  read_only: {
    type: Boolean,
    default: false
  }
})
const rating = ref(priceFormate(props.rating, false))
function setRating(new_rating) {
  rating.value = new_rating
  emits('updateRating', new_rating)
}
</script>